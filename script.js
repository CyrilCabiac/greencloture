//Json produits mis à jour le 17/12/2019

PRODUITS = {"PANNEAU":{"Eco":{"2m03":{"9005":{"designation":"Panneau rigide Eco - Noir 9005 - 2m03","ref":7900,"weight":10.22,"prixVente":42.14},"6005":{"designation":"Panneau rigide Eco - Vert 6005 - 2m03","ref":7320,"weight":10.22,"prixVente":42.14},"7016":{"designation":"Panneau rigide Eco - Gris Anthracite 7016 - 2m03","ref":7313,"weight":10.22,"prixVente":42.14}},"1m73":{"9005":{"designation":"Panneau rigide Eco - Noir 9005 - 1m73","ref":7899,"weight":8.61,"prixVente":36.6},"6005":{"designation":"Panneau rigide Eco - Vert 6005 - 1m73","ref":7319,"weight":8.61,"prixVente":36.6},"7016":{"designation":"Panneau rigide Eco - Gris Anthracite 7016 - 1m73","ref":7312,"weight":8.61,"prixVente":36.6}},"1m53":{"9005":{"designation":"Panneau rigide Eco - Noir 9005 - 1m53","ref":7898,"weight":7.73,"prixVente":31.8},"6005":{"designation":"Panneau rigide Eco - Vert 6005 - 1m53","ref":7318,"weight":0,"prixVente":31.8},"7016":{"designation":"Panneau rigide Eco - Gris Anthracite 7016 - 1m53","ref":7311,"weight":7.73,"prixVente":31.8}},"1m23":{"9005":{"designation":"Panneau rigide Eco - Noir 9005 - 1m23","ref":7897,"weight":6.1,"prixVente":26.66},"6005":{"designation":"Panneau rigide Eco - Vert 6005 - 1m23","ref":7317,"weight":6.1,"prixVente":26.66},"7016":{"designation":"Panneau rigide Eco - Gris Anthracite 7016 - 1m23","ref":7310,"weight":6.1,"prixVente":26.66}},"1m03":{"9005":{"designation":"Panneau rigide Eco - Noir 9005 - 1m03","ref":7896,"weight":5.25,"prixVente":23.4},"6005":{"designation":"Panneau rigide Eco - Vert 6005 - 1m03","ref":7316,"weight":5.25,"prixVente":23.4},"7016":{"designation":"Panneau rigide Eco - Gris Anthracite 7016 - 1m03","ref":7309,"weight":5.25,"prixVente":23.4}},"0m63":{"9005":{"designation":"Panneau rigide Eco - Noir 9005 - 0m63","ref":7894,"weight":3.6,"prixVente":14.26},"6005":{"designation":"Panneau rigide Eco - Vert 6005 - 0m63","ref":7314,"weight":3.6,"prixVente":14.26},"7016":{"designation":"Panneau rigide Eco - Gris Anthracite 7016 - 0m63","ref":7307,"weight":3.6,"prixVente":14.26}}},"Brico":{"2m03":{"9005":{"designation":"Panneau rigide Hercules Brico - Noir 9005 - 2m03","ref":7909,"weight":12.41,"prixVente":37.9},"6005":{"designation":"Panneau rigide Hercules Brico - Vert 6005 - 2m03","ref":7530,"weight":14.54,"prixVente":37.9},"7016":{"designation":"Panneau rigide Hercules Brico - Gris Anthracite 7016 - 2m03","ref":7529,"weight":14.54,"prixVente":37.9}},"1m73":{"9005":{"designation":"Panneau rigide Hercules Brico - Noir 9005 - 1m73","ref":7907,"weight":12.27,"prixVente":34.9},"6005":{"designation":"Panneau rigide Hercules Brico - Vert 6005 - 1m73","ref":7304,"weight":12.27,"prixVente":34.9},"7016":{"designation":"Panneau rigide Hercules Brico - Gris Anthracite 7016 - 1m73","ref":7297,"weight":12.27,"prixVente":34.9}},"1m53":{"9005":{"designation":"Panneau rigide Hercules Brico - Noir 9005 - 1m53","ref":7906,"weight":10.99,"prixVente":30.9},"6005":{"designation":"Panneau rigide Hercules Brico - Vert 6005 - 1m53","ref":7303,"weight":8.81,"prixVente":30.9},"7016":{"designation":"Panneau rigide Hercules Brico - Gris Anthracite 7016 - 1m53","ref":7296,"weight":10.99,"prixVente":30.9}},"1m23":{"9005":{"designation":"Panneau rigide Hercules Brico - Noir 9005 - 1m23","ref":7905,"weight":8.73,"prixVente":25.9},"6005":{"designation":"Panneau rigide Hercules Brico - Vert 6005 - 1m23","ref":7302,"weight":8.72,"prixVente":25.9},"7016":{"designation":"Panneau rigide Hercules Brico - Gris Anthracite 7016 - 1m23","ref":7295,"weight":8.72,"prixVente":25.9}},"1m03":{"9005":{"designation":"Panneau rigide Hercules Brico - Noir 9005 - 1m03","ref":7904,"weight":7.44,"prixVente":22.5},"6005":{"designation":"Panneau rigide Hercules Brico - Vert 6005 - 1m03","ref":7301,"weight":7.44,"prixVente":22.5},"7016":{"designation":"Panneau rigide Hercules Brico - Gris Anthracite 7016 - 1m03","ref":7294,"weight":7.44,"prixVente":22.5}},"0m63":{"9005":{"designation":"Panneau rigide Hercules Brico - Noir 9005 - 0m63","ref":7902,"weight":4.89,"prixVente":12.9},"6005":{"designation":"Panneau rigide Hercules Brico - Vert 6005 - 0m63","ref":7299,"weight":4.89,"prixVente":14.9},"7016":{"designation":"Panneau rigide Hercules Brico - Gris Anthracite 7016 - 0m63","ref":7292,"weight":4.89,"prixVente":12.9}}},"Medium":{"2m03":{"9005":{"designation":"Panneau rigide Hercules Medium - Noir 9005 - 2m03","ref":7915,"weight":15.09,"prixVente":39.9},"6005":{"designation":"Panneau rigide Hercules Medium - Vert 6005 - 2m03","ref":7527,"weight":15.09,"prixVente":34.99},"7016":{"designation":"Panneau rigide Hercules Medium - Gris Anthracite 7016 - 2m03","ref":7526,"weight":15.09,"prixVente":39.9}},"1m93":{"9005":{"designation":"Panneau rigide Hercules Medium - Noir 9005 - 1m93","ref":7914,"weight":13.76,"prixVente":34.99},"7016":{"designation":"Panneau rigide Hercules Medium - Gris Anthracite 7016 - 1m93","ref":7525,"weight":13.76,"prixVente":34.99},"6005":{"designation":"Panneau rigide Hercules Medium - Vert 6005 - 1m93","ref":7290,"weight":13.76,"prixVente":31.99}},"1m73":{"9005":{"designation":"Panneau rigide Hercules Medium - Noir 9005 - 1m73","ref":7913,"weight":12.63,"prixVente":29.91},"6005":{"designation":"Panneau rigide Hercules Medium - Vert 6005 - 1m73","ref":7289,"weight":12.63,"prixVente":29.91},"7016":{"designation":"Panneau rigide Hercules Medium - Gris Anthracite 7016 - 1m73","ref":7282,"weight":12.63,"prixVente":29.91}},"1m53":{"9005":{"designation":"Panneau rigide Hercules Medium - Noir 9005 - 1m53","ref":7912,"weight":11.44,"prixVente":27.67},"6005":{"designation":"Panneau rigide Hercules Medium - Vert 6005 - 1m53","ref":7288,"weight":11.44,"prixVente":27.67},"7016":{"designation":"Panneau rigide Hercules Medium - Gris Anthracite 7016 - 1m53","ref":7281,"weight":11.44,"prixVente":27.67}},"1m23":{"9005":{"designation":"Panneau rigide Hercules Medium - Noir 9005 - 1m23","ref":7911,"weight":8.98,"prixVente":21.81},"6005":{"designation":"Panneau rigide Hercules Medium - Vert 6005 - 1m23","ref":7287,"weight":8.98,"prixVente":21.81},"7016":{"designation":"Panneau rigide Hercules Medium - Gris Anthracite 7016 - 1m23","ref":7280,"weight":8.98,"prixVente":21.81}},"1m03":{"9005":{"designation":"Panneau rigide Hercules Medium - Noir 9005 - 1m03","ref":7910,"weight":7.78,"prixVente":19.59},"6005":{"designation":"Panneau rigide Hercules Medium - Vert 6005 - 1m03","ref":7286,"weight":7.78,"prixVente":19.59},"7016":{"designation":"Panneau rigide Hercules Medium - Gris Anthracite 7016 - 1m03","ref":7279,"weight":7.78,"prixVente":19.59}}},"Plus":{"2m43":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 2m43","ref":7925,"weight":23.59,"prixVente":53.5},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 2m43","ref":7514,"weight":23.59,"prixVente":53.58},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 2m43","ref":7502,"weight":23.51,"prixVente":53.58}},"2m23":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 2m23","ref":7924,"weight":20.92,"prixVente":45.25},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 2m23","ref":7513,"weight":20.92,"prixVente":45.25},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 2m23","ref":7501,"weight":20.92,"prixVente":45.25}},"2m03":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 2m03","ref":7923,"weight":20.42,"prixVente":39.01},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 2m03","ref":7500,"weight":20.42,"prixVente":39.01},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 2m03","ref":7499,"weight":20.42,"prixVente":39.01}},"1m93":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 1m93","ref":7922,"weight":18.3,"prixVente":26.27},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 1m93","ref":7256,"weight":18.3,"prixVente":34.27},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 1m93","ref":7255,"weight":18.3,"prixVente":26.27}},"1m73":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 1m73","ref":7921,"weight":17.14,"prixVente":34.27},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 1m73","ref":7116,"weight":17.14,"prixVente":34.27},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 1m73","ref":7110,"weight":17.14,"prixVente":34.27}},"1m53":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 1m53","ref":7920,"weight":15.45,"prixVente":31.02},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 1m53","ref":7115,"weight":15.45,"prixVente":31.02},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 1m53","ref":7109,"weight":15.45,"prixVente":31.02}},"1m23":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 1m23","ref":7919,"weight":12.17,"prixVente":25.9},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 1m23","ref":7114,"weight":12.17,"prixVente":25.89},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 1m23","ref":7108,"weight":12.17,"prixVente":25.89}},"1m03":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 1m03","ref":7918,"weight":10.48,"prixVente":22.32},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 1m03","ref":7113,"weight":10.48,"prixVente":22.32},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 1m03","ref":7107,"weight":10.48,"prixVente":22.32}},"0m83":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 0m83","ref":7917,"weight":8.8,"prixVente":20.61},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 0m83","ref":7112,"weight":8.8,"prixVente":20.61},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 0m83","ref":7106,"weight":8.8,"prixVente":20.61}},"0m63":{"9005":{"designation":"Panneau rigide Hercules Plus 5mm - Noir 9005 - 0m63","ref":7916,"weight":7.11,"prixVente":18.54},"6005":{"designation":"Panneau rigide Hercules Plus 5mm - Vert 6005 - 0m63","ref":7111,"weight":7.11,"prixVente":18.54},"7016":{"designation":"Panneau rigide Hercules Plus 5mm - Gris Anthracite 7016 - 0m63","ref":7105,"weight":7.11,"prixVente":18.54}}}},"POTEAU":{"EasyClip":{"3m20":{"9005":{"designation":"Poteau EasyClip - Noir 9005 - 3m20","ref":7956,"weight":10.19,"prixVente":34.97},"7016":{"designation":"Poteau EasyClip - Gris Anthracite 7016 - 3m20","ref":7521,"weight":10.19,"prixVente":34.97},"6005":{"designation":"Poteau EasyClip - Vert 6005 - 3m20","ref":7519,"weight":10.19,"prixVente":34.97}},"2m70":{"9005":{"designation":"Poteau EasyClip - Noir 9005 - 2m70","ref":7955,"weight":8.6,"prixVente":27.82},"6005":{"designation":"Poteau EasyClip - Vert 6005 - 2m70","ref":7232,"weight":8.6,"prixVente":27.82},"7016":{"designation":"Poteau EasyClip - Gris Anthracite 7016 - 2m70","ref":7225,"weight":8.6,"prixVente":27.82}},"2m50":{"9005":{"designation":"Poteau EasyClip - Noir 9005 - 2m50","ref":7954,"weight":7.97,"prixVente":35.64},"6005":{"designation":"Poteau EasyClip - Vert 6005 - 2m50","ref":7231,"weight":7.65,"prixVente":24.95},"7016":{"designation":"Poteau EasyClip - Gris Anthracite 7016 - 2m50","ref":7224,"weight":7.97,"prixVente":20.79}},"2m40":{"9005":{"designation":"Poteau EasyClip - Noir 9005 - 2m40","ref":7953,"weight":7.65,"prixVente":34.9},"7016":{"designation":"Poteau EasyClip - Gris Anthracite 7016 - 2m40","ref":7520,"weight":7.65,"prixVente":23.84},"6005":{"designation":"Poteau EasyClip - Vert 6005 - 2m40","ref":7518,"weight":7.65,"prixVente":23.84}},"2m20":{"9005":{"designation":"Poteau EasyClip - Noir 9005 - 2m20","ref":7952,"weight":7.01,"prixVente":26.9},"6005":{"designation":"Poteau EasyClip - Vert 6005 - 2m20","ref":7230,"weight":7.01,"prixVente":26.9},"7016":{"designation":"Poteau EasyClip - Gris Anthracite 7016 - 2m20","ref":7223,"weight":7.01,"prixVente":22.71}},"2m00":{"9005":{"designation":"Poteau EasyClip - Noir 9005 - 2m00","ref":7951,"weight":6.38,"prixVente":23.9},"6005":{"designation":"Poteau EasyClip - Vert 6005 - 2m00","ref":7229,"weight":6.38,"prixVente":23.9},"7016":{"designation":"Poteau EasyClip - Gris Anthracite 7016 - 2m00","ref":7222,"weight":6.38,"prixVente":20.42}},"1m60":{"9005":{"designation":"Poteau EasyClip - Noir 9005 - 1m60","ref":7947,"weight":3.52,"prixVente":18},"7016":{"designation":"Poteau EasyClip - Gris Anthracite 7016 - 1m60","ref":7554,"weight":5.11,"prixVente":16.15},"6005":{"designation":"Poteau EasyClip - Vert 6005 - 1m60","ref":7553,"weight":5.11,"prixVente":18}}},"Profix":{"2m70":{"9005":{"designation":"Poteau Profix avec encoches - Noir 9005 - 2m70","ref":7935,"weight":7.21,"prixVente":28.36},"6005":{"designation":"Poteau Profix avec encoches - Vert 6005 - 2m70","ref":7214,"weight":7.21,"prixVente":28.36},"7016":{"designation":"Poteau Profix avec encoches - Gris Anthracite 7016 - 2m70","ref":7207,"weight":7.21,"prixVente":28.36}},"2m50":{"9005":{"designation":"Poteau Profix avec encoches - Noir 9005 - 2m50","ref":7934,"weight":6.67,"prixVente":26.12},"6005":{"designation":"Poteau Profix avec encoches - Vert 6005 - 2m50","ref":7213,"weight":6.41,"prixVente":23.11},"7016":{"designation":"Poteau Profix avec encoches - Gris Anthracite 7016 - 2m50","ref":7206,"weight":6.67,"prixVente":23.11}},"2m20":{"9005":{"designation":"Poteau Profix avec encoches - Noir 9005 - 2m20","ref":7933,"weight":5.87,"prixVente":23.11},"6005":{"designation":"Poteau Profix avec encoches - Vert 6005 - 2m20","ref":7212,"weight":5.87,"prixVente":23.11},"7016":{"designation":"Poteau Profix avec encoches - Gris Anthracite 7016 - 2m20","ref":7205,"weight":5.87,"prixVente":23.11}},"2m00":{"9005":{"designation":"Poteau Profix avec encoches - Noir 9005 - 2m00","ref":7932,"weight":5.34,"prixVente":21.03},"6005":{"designation":"Poteau Profix avec encoches - Vert 6005 - 2m00","ref":7211,"weight":5.34,"prixVente":21.03},"7016":{"designation":"Poteau Profix avec encoches - Gris Anthracite 7016 - 2m00","ref":7204,"weight":5.34,"prixVente":21.03}},"1m70":{"9005":{"designation":"Poteau Profix avec encoches - Noir 9005 - 1m70","ref":7931,"weight":4.54,"prixVente":17.87},"6005":{"designation":"Poteau Profix avec encoches - Vert 6005 - 1m70","ref":7210,"weight":4.54,"prixVente":17.87},"7016":{"designation":"Poteau Profix avec encoches - Gris Anthracite 7016 - 1m70","ref":7203,"weight":4.54,"prixVente":17.87}},"1m30":{"9005":{"designation":"Poteau Profix avec encoches - Noir 9005 - 1m30","ref":7930,"weight":3.48,"prixVente":14.84},"6005":{"designation":"Poteau Profix avec encoches - Vert 6005 - 1m30","ref":7209,"weight":3.48,"prixVente":14.84},"7016":{"designation":"Poteau Profix avec encoches - Gris Anthracite 7016 - 1m30","ref":7202,"weight":3.48,"prixVente":14.84}},"1m10":{"9005":{"designation":"Poteau Profix avec encoches - Noir 9005 - 1m10","ref":7929,"weight":2.94,"prixVente":12.74},"6005":{"designation":"Poteau Profix avec encoches - Vert 6005 - 1m10","ref":7208,"weight":2.94,"prixVente":12.74},"7016":{"designation":"Poteau Profix avec encoches - Gris Anthracite 7016 - 1m10","ref":7201,"weight":2.94,"prixVente":12.74}}}},"AUTRE":{"A_soub":{"s50cm":{"designation":"Plaque de soubassement en B\u00e9ton - 50cm","ref":7342,"weight":114,"prixVente":44.73},"s25cm":{"designation":"Plaque de soubassement en B\u00e9ton - 25cm","ref":7341,"weight":57,"prixVente":24.61}},"PL_EASY":{"9005":{"designation":"Platine pour poteau Easyclip - Noir 9005","ref":7926,"weight":1.06,"prixVente":22.68},"6005":{"designation":"Platine pour poteau Easyclip - Vert 6005","ref":7272,"weight":1.06,"prixVente":22.68},"7016":{"designation":"Platine pour poteau Easyclip - Gris Anthracite 7016","ref":7271,"weight":1.06,"prixVente":22.68}},"A_Poly_Clip_Easy":{"9005":{"designation":"Clip polyamide de fixation pour poteau EASYCLIP - Noir 9005","ref":7245,"weight":0.04,"prixVente":0.6},"6005":{"designation":"Clip polyamide de fixation pour poteau EASYCLIP - Vert 6005","ref":7244,"weight":0.04,"prixVente":0.6}},"PL_PROFIX":{"9005":{"designation":"Platine PROFIX - Noir 9005","ref":7927,"weight":1.12,"prixVente":22.36},"6005":{"designation":"Platine PROFIX - Vert 6005","ref":7138,"weight":1.12,"prixVente":22.36},"7016":{"designation":"Platine PROFIX - Gris Anthracite 7016","ref":7137,"weight":1.12,"prixVente":22.36}},"A_Cap_Easy":{"7016":{"designation":"Capuchon poteau Easyclip - Gris Anthracite 7016","ref":7154,"weight":0.05,"prixVente":0.84},"6005":{"designation":"Capuchon poteau Easyclip - Vert 6005","ref":7153,"weight":0.05,"prixVente":0.84}},"A_Clip_Easy":{"9005":{"designation":"Clip aluminium de fixation pour poteau EASYCLIP - Noir 9005","ref":7928,"weight":0.05,"prixVente":0.96},"6005":{"designation":"Clip aluminium de fixation pour poteau EASYCLIP - Vert 6005","ref":7163,"weight":0.05,"prixVente":0.96},"7016":{"designation":"Clip aluminium de fixation pour poteau EASYCLIP - Gris Anthracite 7016","ref":7162,"weight":0.05,"prixVente":0.96}},"A_Cal_Pose":{"":{"designation":"Cales de pose pour grillage rigide (X12) - ","ref":2362,"weight":0.1,"prixVente":9.93}}},"OCCULTATION":{"occultation":{"1m93":{"9005":{"designation":"Kit d'occultation lattes PVC - Noir 9005 - 1m93","ref":7942,"weight":8.28,"prixVente":87.65},"7016":{"designation":"Kit d'occultation lattes PVC - Gris Anthracite 7016 - 1m93","ref":7517,"weight":8.28,"prixVente":87.65},"6005":{"designation":"Kit d'occultation lattes PVC - Vert 6005 - 1m93","ref":7516,"weight":8.28,"prixVente":87.65}},"1m73":{"9005":{"designation":"Kit d'occultation lattes PVC - Noir 9005 - 1m73","ref":7941,"weight":7.58,"prixVente":77.9},"6005":{"designation":"Kit d'occultation lattes PVC - Vert 6005 - 1m73","ref":7192,"weight":7.58,"prixVente":77.9},"7016":{"designation":"Kit d'occultation lattes PVC - Gris Anthracite 7016 - 1m73","ref":7187,"weight":7.58,"prixVente":77.9}},"1m53":{"9005":{"designation":"Kit d'occultation lattes PVC - Noir 9005 - 1m53","ref":7940,"weight":6.85,"prixVente":68.67},"6005":{"designation":"Kit d'occultation lattes PVC - Vert 6005 - 1m53","ref":7191,"weight":6.85,"prixVente":68.67},"7016":{"designation":"Kit d'occultation lattes PVC - Gris Anthracite 7016 - 1m53","ref":7186,"weight":6.85,"prixVente":68.67}},"1m23":{"9005":{"designation":"Kit d'occultation lattes PVC - Noir 9005 - 1m23","ref":7939,"weight":5.25,"prixVente":58.11},"6005":{"designation":"Kit d'occultation lattes PVC - Vert 6005 - 1m23","ref":7190,"weight":5.25,"prixVente":58.11},"7016":{"designation":"Kit d'occultation lattes PVC - Gris Anthracite 7016 - 1m23","ref":7185,"weight":5.25,"prixVente":58.11}},"1m03":{"9005":{"designation":"Kit d'occultation lattes PVC - Noir 9005 - 1m03","ref":7938,"weight":4.78,"prixVente":48.87},"6005":{"designation":"Kit d'occultation lattes PVC - Vert 6005 - 1m03","ref":7189,"weight":4.78,"prixVente":48.87},"7016":{"designation":"Kit d'occultation lattes PVC - Gris Anthracite 7016 - 1m03","ref":7184,"weight":4.78,"prixVente":48.87}}}}};




jQuery(document).ready(function() {
	var $ = jQuery;
	var current_fs, next_fs;
	var form = document.getElementById('msform')
	var nbPanneaux = 0;
	var CMDES = [], livraison = 0


// Fonction de calcul du nombre de panneaux dans le step 3
	function calculNbPanneaux(e) {
		var LongueurCloture = parseFloat(form.longueur.value.replace(',', '.'));
		if(isNaN(LongueurCloture))
			LongueurCloture = 0
		var nbPanneaux = Math.ceil(LongueurCloture / ((form.gamme.value == 'Eco')?2:2.5));

		let nbPanneauxElt = document.getElementById("output_NbDePanneaux")
		let nbPoteauxElt = document.getElementById("output_NbDePoteaux")
		//Check de la longueur Max
		if(LongueurCloture < 10000) {
			nbPanneauxElt.innerHTML = nbPanneaux;
			nbPoteauxElt.innerHTML = nbPanneaux + 1;
		} else {
			alert('Veuillez saisir une longueur inférieure à 10000m')
			nbPanneauxElt.innerHTML = '0'
			nbPoteauxElt.innerHTML = '0'
		}
	}
	form.longueur.addEventListener('input', calculNbPanneaux)
	
	function majImage(elt) {
		if('target' in elt)
			elt = elt.target
		var optionValue = elt.value;
		var cl = (this.id === 'soubassement')?'.box2':'.box';
		
		if (optionValue) {
			$(cl).not("." + optionValue).hide();
			$("." + optionValue).show();
		} else
			$(cl).hide();
	}


	function execute(current) {
		let d = {
			gamme: form.gamme.value,
			longueur: parseFloat(form.longueur.value.replace(',', '.')),
			hauteur: form.hauteur.value,
			nbAngle: parseInt(form.angles.value, 10),
			couleur: form.couleur.value.substring(10),
			typePose: form.pose.value,
			soubassement: form.soubassement.value,
			occultation: form.occultation.value,
			livraison: form.livraison.value
		}
		
		
		switch(current.id) {
			
			
			case 'step1_bienvenue':
				//form.reset()
			break;
			
			
			case 'step2_gamme':
				let heights = Object.keys(PRODUITS.PANNEAU[d.gamme])

				form.hauteur.innerHTML = heights.map(function(h) {
					return '<option value="' + h + '">' + h + '</option>'
				}).sort().join('\n')

				calculNbPanneaux()
			break;
			case 'step3_dimensions':
				if(!d.hauteur || !(d.longueur > 2.5)) {
					alert('Saisissez une longueur supérieure à 2.5m')
					return false
				}
					
				let colors = Object.keys(PRODUITS.PANNEAU[d.gamme][d.hauteur])
				
								
				majImage(form.couleur)
			break;
			case 'step4_couleurs':
				majImage(form.pose)
			break;
			case 'step5_typeDePose':
				if(!d.typePose) {
					alert('Veuillez spécifier un type de pose pour votre clôture')
					return false
				}
				
				majImage(form.soubassement)
				majImage(form.occultation)
				$('#view_soubassement')[((d.typePose == 'platine') ||(d.gamme === 'Eco'))?'hide':'show']()
			break;
			case 'step6_options':
				CMDES = []

				let nbPanneaux = Math.ceil(d.longueur / ((d.gamme == 'Eco')?2:2.5));
				CMDES.push({produit: PRODUITS.PANNEAU[d.gamme][d.hauteur][d.couleur], qte: nbPanneaux})

				if(d.soubassement)
					CMDES.push({produit: PRODUITS.AUTRE.A_soub[d.soubassement], qte: nbPanneaux})
				if(d.occultation) {
					if(d.hauteur in PRODUITS.OCCULTATION.occultation)
						CMDES.push({produit: PRODUITS.OCCULTATION.occultation[d.hauteur][d.couleur], qte: nbPanneaux})
					else
						alert('Il n\'y a pas d\'occultation de cette taille')
				}
	
				let nbPoteaux = nbPanneaux + 1
		
				let typePoteau = (d.nbAngle == 0)?'EasyClip':'Profix'
				let h = parseInt(d.hauteur.replace(/\D/g, ''), 10)
				if(d.typePose == 'sceller')
					h += 50
				else
					CMDES.push({produit: PRODUITS.AUTRE[(typePoteau == 'EasyClip')?'PL_EASY':'PL_PROFIX'][d.couleur], qte: nbPoteaux})
				
				let hauteurs = Object.keys(PRODUITS.POTEAU[typePoteau]).map(v => parseInt(v.replace(/\D/g, ''), 10)).sort()

				let hSel = hauteurs[0];
				for(let i = 1; (hSel < h) && (i < hauteurs.length); i++) 
					hSel = hauteurs[i]
				hSel = (hSel/100).toFixed(2).replace('.', 'm')
				CMDES.push({produit: PRODUITS.POTEAU[typePoteau][hSel][d.couleur], qte: nbPoteaux})
		
				if(typePoteau == 'EasyClip') {
					let nbClip = nbPanneaux * 2 * (Math.ceil(parseInt(d.hauteur.replace(/\D/g, ''), 10) / 30) + 1)
					CMDES.push({produit: PRODUITS.AUTRE.A_Clip_Easy[d.couleur], qte: nbClip})
				}
		
				let poids = CMDES.reduce((total, cmde) => total += cmde.qte*cmde.produit.weight, 0)
				
				if(poids > 200)
					document.getElementById('radio_Messagerie').style.visibility = 'hidden'
				
			break;
	 		case 'step6-5_expedition':
				if(!d.livraison) {
					alert('Veuillez spécifier un type de livraison pour votre commande')
					return false
				}


				livraison = 0
				let total = CMDES.reduce((total, cmde) => total += cmde.qte*cmde.produit.prixVente, 0)
				switch(d.livraison) {
				case 'Premium':
					if(total < 5000)
						livraison = 225
				break;
				case 'Classique':
					if(total < 2000)
						livraison = 162
				break;
				case 'Messagerie':
						livraison = 90
				break;
				}
				
				document.getElementById('recaplignes').innerHTML = CMDES.map(function(cmde) {
					return '<tr class="ligne"><td class="designation">' + cmde.produit.designation
					 + '</td><td class="tg-9wq8">' + cmde.produit.prixVente.toFixed(2)
					 + ' €</td><td class="tg-9wq8">' + cmde.qte
					 + '</td><td class="tg-9wq8 prix">' + (cmde.qte*cmde.produit.prixVente).toFixed(2) + ' €</td></tr>'
				}).join('\n')
				
				document.getElementById('type_livraison').innerHTML = d.livraison
				document.getElementById('recap_livraison').innerHTML = livraison.toFixed(2) + ' €'
				document.getElementById('recap_total').innerHTML = (livraison+total).toFixed(2) + ' €'
			break;
		}
		return true;
	}
	

	$(".next").click(function() {
		current_fs = $(this).parents('fieldset');
		if(!execute(current_fs[0]))
			return;
		next_fs = current_fs.next();
		next_fs.show();
		current_fs.hide();
		$("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");
	});

	$(".previous").click(function() {
		current_fs = $(this).parents('fieldset');
		next_fs = current_fs.prev();
		next_fs.show();
		current_fs.hide();
		$("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

	});

	$(form.gamme).click(function() {
		$('#step2_gamme a.next').show()
	})


	//Ajout au panier
	document.getElementById('addToCart').addEventListener('click', function(e) {
		fetch('/export.php', {
			method: 'POST',
			headers: new Headers({'Content-Type': 'application/json'}),
			body: JSON.stringify({cart: CMDES.map(cmde => ({ref: cmde.produit.ref, qte: cmde.qte}))})
		}).then(function(response) {
			response.json().then(function(v) {
				if(v.res == 'OK')
					window.location = 'https://greencloture.fr/panier/'
				else
					alert('Erreur')
			})
		})
	})
	document.getElementById('send_quote').addEventListener('click', function(e) {
		let f = document.getElementById('customer_data')
		if(f.reportValidity()) {
			let client = {
				adresse: f.prenom.value + ' ' + f.nom.value + '\n' + f.adresse.value + '\n' + f.code_postal.value + ' ' + f.ville.value,
				email: f.email.value,
				telephone: f.telephone.value
			}
			let loader = document.getElementById('idee')
			loader.innerHTML = '<img style="width:50%;margin-left:25%; margin-right:auto" src="https://greencloture.fr/wp-content/themes/urna-child/assets_configurateur/images/loader.gif">'
			
			
			fetch('https://server.coprometal.com/data/importDevis.php', {
				method: 'POST',
				headers: new Headers({'Content-Type': 'text/plain'}),
				body: JSON.stringify({client: client, livraison: livraison, cart: CMDES.map(cmde => ({ref: cmde.produit.ref, qte: cmde.qte}))})
			}).then(function(response) {
				response.json().then(function(v) {
					if(v.res == 'OK') {
						alert('Votre devis est dans votre boîte email')
						window.location = 'https://greencloture.fr/'
					} else
						alert(v.res)
				})
			})	
		}
	});

	//Input du nombre d'angles
	var $input = $('#quantity input[type="number"]'),
		min = $input.attr('min'),
		max = $input.attr('max');

	$('#quantity .quantity-up').click(function() {
		var old_val = parseFloat($input.val());
		var new_val = old_val >= max ? old_val : old_val + 1;
		$input.val(new_val);
		$input.trigger("change");
	});
	$('#quantity .quantity-down').click(function() {
		var old_val = parseFloat($input.val());
		var new_val = old_val <= min ? old_val : old_val - 1;
		$input.val(new_val);
		$input.trigger("change");
	});
		
	//Affichage des panneaux
	$("select").change(majImage);
	
	

	
	

});
